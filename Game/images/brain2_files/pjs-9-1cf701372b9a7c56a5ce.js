webpackJsonp([9],{RvAN:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("d6ZO"),s=n.n(i),c=n("GGB8"),l=n.n(c),p=n("W/Cr"),u=n("IaRT"),d=n.n(u),h=n("WBZ1"),m=n.n(h),f=n("gEaE"),y=n("7IpV"),v={UP:"up",DOWN:"down"},E=100,_=function(e){function t(){var n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=a=o(this,e.call.apply(e,[this].concat(c))),a.handleScroll=m()(function(){if(!a.props.isFetching){var e=a.props.scrollThreshold;Object(y.c)(a._container)-Object(y.d)(a._container)-Object(y.a)(a._container)<e&&a.fetchMore()}},E),a.addEventListeners=function(e){var t=a.props.useWindow;t&&(e=window),a.removeEventListeners(),e&&(t||e.addEventListener("wheel",a.preventScroll),e.addEventListener("scroll",a.handleScroll)),a._container=e},a.preventScroll=function(e){var t=e.deltaY<0?v.UP:v.DOWN,n=a._container.scrollHeight-a._container.scrollTop-a._container.clientHeight==0,r=0===a._container.scrollTop;(t===v.DOWN&&n||t===v.UP&&r)&&e.preventDefault()},i=n,o(a,i)}return a(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function e(t){var n=t.data,r=t.onDataFetched;n&&r(n.length)},t.prototype.componentWillUnmount=function e(){this.removeEventListeners()},t.prototype.removeEventListeners=function e(){var t=this.props.useWindow;this._container&&(t||this._container.removeEventListener("wheel",this.preventScroll),this._container.removeEventListener("scroll",this.handleScroll))},t.prototype.fetchMore=function e(){this.props.isFetching||(this.props.isAtEnd?this._container.removeEventListener("scroll",this.handleScroll):this.props.fetchMoreData())},t.prototype.render=function e(){var t=this.props,n=t.className,r=t.data,o=t.isFetching,a=t.renderEmptyState,i=t.renderItem;return!o&&r&&0===r.length?a():s.a.createElement("div",{className:l()(n,"listContainer"),ref:this.addEventListeners},this.props.data?s.a.createElement("ul",{className:"scrollableList"},this.props.data.map(function(e,t){return i(e,t)})):null,this.props.isAtEnd?null:s.a.createElement("div",{className:"loadingItem"},s.a.createElement(f.E,{accessibilityLabel:p.a._("Loading items"),show:this.props.isFetching})))},t}(i.Component);_.defaultProps={data:[],onDataFetched:function e(){},scrollThreshold:400,useWindow:!1},t.a=_},wygQ:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=n("d6ZO"),p=n.n(l),u=n("SnoN"),d=n("GGB8"),h=n.n(d),m=n("IaRT"),f=n.n(m),y={ONE:1,TWO:2,END:3},v=function(e){function t(){var n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=a=o(this,e.call.apply(e,[this].concat(c))),a.state={educationStep:y.ONE},a.toStepTwo=function(){a.setState({educationStep:y.TWO})},a.dismissEducation=function(){var e=a.props.handleDismiss;a.setState({educationStep:y.END}),e()},i=n,o(a,i)}return a(t,e),t.prototype.componentDidMount=function e(){var t=this,n=this.props.stepDelay;this.educationStepTimer=setTimeout(function(){t.state.educationStep<y.TWO&&t.setState({educationStep:y.TWO})},n)},t.prototype.componentWillUnmount=function e(){clearTimeout(this.educationStepTimer)},t.prototype.renderPill=function e(t,n,r){return p.a.createElement("button",{onClick:r,className:h()("educationPill","slideIn",{fadeOut:n})},p.a.createElement("div",{className:"message"},t))},t.prototype.render=function e(){var t=this.state.educationStep,n=this.props,r=n.titleText,o=n.titleText2,a=this.renderPill(r,t===y.TWO,this.toStepTwo),i=this.renderPill(o,t===y.END,this.dismissEducation);return p.a.createElement("div",{className:"newsHubEducation"},p.a.createElement("div",{className:"educationStep stepOne"},(t===y.ONE||t===y.TWO)&&a),p.a.createElement("div",{className:"educationStep stepTwo bottom"},(t===y.TWO||t===y.END)&&i))},t}(l.Component),E=n("W/Cr"),_=n("zFaW"),w=n("7Dxt"),b=Object(w.a)(_.a),T=n("mnfW"),g=n("RvAN"),x=n("nX0T"),O=n("mHth"),D=n("YZkw"),S=n("pN+K"),N=n("MQ2h"),C=n.n(N),I=n("Kqaz"),j=n("gEaE"),P=4,W=864e5,k=Object(S.b)({name:"NewsHubResource",options:{page_size:10}},{allowStale:!1})(g.a),F=function(e){function t(n){i(this,t);var r=s(this,e.call(this,n));return r.state={shouldEducate:!1},r.onDataFetched=function(e){r.props.experience&&e>P&&!r.state.shouldEducate&&r.setState({shouldEducate:!0})},r.handleItemClick=function(){r.handleComplete(),r.props.handleItemClick()},r.handleComplete=function(){var e=r.props,t=e.experienceClient,n=e.experience;n&&t.completeExperience(n.placement_id,n.experience_id)},r.handleDismiss=function(){var e=r.props,t=e.experienceClient,n=e.experience;n&&t.dismissExperience(n.placement_id,n.experience_id)},r.renderItem=function(e,t){var n={impressionAuxFields:{displayMode:e.encoded_display_mode,newsType:e.news_type},impressionType:"News",loggingId:e.id,slotIndex:t,viewParameter:3081,viewType:107};return p.a.createElement("li",{className:"newsHubItemWrapper",key:t},r.renderDate(e.last_updated_at,t),p.a.createElement(b,Object.assign({contentItemCount:e.content_item_count,contentItems:e.content_items,contentText:e.content_text,displayMode:e.encoded_display_mode,handleClick:r.handleItemClick,headerIconImageUrl:e.header_icon_image_url,headerIconObjects:e.header_icon_objects,headerText:e.header_text,id:e.id,lastUpdatedAt:e.last_updated_at,overrideClickUrl:e.override_click_url,subHeaderText:e.sub_header_text,siteType:r.props.siteType,textMapping:e.text_mapping,type:e.news_type,unread:e.unread},n)))},r.renderEmptyState=function(){return p.a.createElement(j.b,{height:400},p.a.createElement(j.b,{display:"flex",justifyContent:"center",color:"darkGray",shape:"pill",paddingY:5,margin:5},p.a.createElement(j.g,{xs:10},p.a.createElement(j.I,{bold:!0,color:"white",size:"lg"},E.a._("New! Discover ideas from your friends, followers and people who love your Pins!")))))},r.currentDay=null,r.today=new Date,r.today.setHours(0,0,0,0),r}return c(t,e),t.prototype.getChildContext=function e(){return{preloadingSupported:!0}},t.prototype.componentDidMount=function e(){var t=this.props,n=t.experience,r=t.experienceClient;n&&r.viewExperience(n.placement_id,n.experience_id),this.logPanelImpression()},t.prototype.shouldComponentUpdate=function e(t,n){if(this.state.shouldEducate===n.shouldEducate){var r=this.props.experience,o=t.experience;return(r||{}).id!==(o||{}).id}return!0},t.prototype.getEducation=function e(){var t=this.props.experience;if(this.state.shouldEducate&&t){var n=t.display_data,r=n.step_delay,o=n.title_text,a=n.title_text_2;return p.a.createElement(v,{handleDismiss:this.handleDismiss,stepDelay:r,titleText:o,titleText2:a})}return null},t.prototype.logPanelImpression=function e(){var t=this.props.contextLog,n=u.a.getInstance(),r=n.getViewFromContext();t(13,{view:107,viewParameter:3081}),n.addViewToContext(r)},t.prototype.renderDate=function e(t,n){var r=new Date(t);if(r.setHours(0,0,0,0),0!==n&&null!==this.currentDay&&void 0!==this.currentDay){var o=this.currentDay;if(r.getTime()===o.getTime())return null}this.currentDay=r;var a=void 0;return a=r.getTime()===this.today.getTime()?E.a._("Today"):r.getTime()===new Date(this.today-864e5).getTime()?E.a._("Yesterday"):r&&r>=new Date(this.today-5184e5)?E.a.getHumanizedTimesince(r.toString()):T.b.formatDate(this.props.locale,r,T.b.DateFormatType.MONTH_DAY,!1),p.a.createElement("div",{className:"newsHubItemDate"},p.a.createElement(j.I,{bold:!0,size:"xl"},a))},t.prototype.render=function e(){return p.a.createElement(x.a,{view:107,viewParameter:3081},p.a.createElement("div",null,this.getEducation(),p.a.createElement(k,{className:"newsHubPanel",onDataFetched:this.onDataFetched,renderEmptyState:this.renderEmptyState,renderItem:this.renderItem})))},t}(l.Component);F.childContextTypes={preloadingSupported:f.a.bool.isRequired},F.defaultProps={handleItemClick:function e(){}};var L=t.a=Object(N.compose)(Object(D.a)(1000035),I.a,O.a)(F)},ybIz:function(e,t,n){"use strict";function r(e){var t=e.handleItemClick,n=e.locale,r=e.siteType;return a.a.createElement("div",{className:"NewsConversationsDropdown"},a.a.createElement("div",{className:"content"},a.a.createElement(i.a,{handleItemClick:t,locale:n,siteType:r})))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n("d6ZO"),a=n.n(o),i=n("wygQ"),s=n("IaRT"),c=n.n(s)}});